\chapter[Формална анализа алг. метода и њихова примена на проблеме у стереометрији]{Формална анализа алгебарских метода и разматрање њихове примене на проблеме у стереометрији}
\chaptermark{Формална анализа алг. метода и њихова примена на проблеме у стереометрији}
\label{algMetodi}

% ------------------------------------------------------------------------------
\section{Увод}
% ------------------------------------------------------------------------------

У Еуклидској геометрији објекти и релације међу њима могу бити
изражени коришћењем полинома. Додатно, свака геометријска конструкција
може бити изражена скупом полинома, а свако геометријско тврђење може
бити доказано кoришћењем алгебарских метода као што су Гребнерове базе
или Вуов метод над скупом полинома. Описаћемо имплементацију алгоритма
у систему Isabelle/HOL који као улазне податке прихвата термове који
описују геометријску конструкцију и враћа одговарајући скуп
полинома. Даљи циљ је примена метода Гребнерових база у оквиру система
Isabelle/HOL над генерисаним полиномима у намери да се докаже
исправност конструкције и тврђења.

Главна идеја је да се поже аутоматско и формално доказивање у
геометрији. И даље не постоји јединствен, нити верификован алгоритам
који трансформише геометријску конструкцију у скуп полинома. Обично,
транслација у полиноме се ради ад-хок методама и не постоји формална
веза између добијених полинома и датих геометријских објеката. Са
формално верификованим методом транслације овај проблем би био решен и
у оквиру ове тезе биће представљени кораци у том правцу.

\section{Алгебарски методи у геометрији}

\subsection{Транслација геометријских тврђења у алгебарску форму}

Алгебарски методи се користе у аутоматском доказивању у геометрији за
теореме конструктивног типа, тј. претпоставке о геометријским
објектима које су добијене током геометријске конструкције. Уводе
(симболичке) координате за геометријске објекте (тачке, и понекад
праве) који се јављају у конструкцији и геометријске конструкције и
тврђења изражавају као алгебарске једначине у којима се јављају
уведене координате. Потом користе алгебарске технике да покажу да
тврђење следи из конструкције.

Пре него што је могуће применити алгебарске методе, геометријско
тврђење мора бити записано у алгебарској форми, као скуп
полиномијалних једнакости (односно полинома), при чему се претпоставља
да су све полиномијалне једнакости облика $f(x) = 0$. Стандардна
процедура за алгебризацију уводи нове симболичке промељиве за
координате тачке и уводи (полиномијане) једнакости који карактеришу
сваки конструктивни корак и свако тврђење које је потребно
показати. Иако је могуће и за праве које се појављују у конструкцији
увести непознате коефицијенте као симболичке променљиве, стандардна
процедура избегава такав приступ и користи само тачке (а праве су
имплицитно задате). Свака конструкција почиње скупом слободних тачака
и током конструкције се уводе зависне тачке. У неким случајевима је
могуће зависне тачке бирати са неким степеном слободе (на пример,
избор произвољне тачке на датој прави). 

Свака тачка добија координате које су репрезентоване симболичким
променљивима. Најчеће се слободне променљиве означавају са $u_i$ ($i =
0, 1, 2, \ldots$), а зависне променљиве се означавају са $x_i$ ($i =
0, 1, 2, \ldots$). Ако је тачка зависна, онда ће све њене координате
бити зависне променњиве.  Ако је тачка слободна, онда су њене
координате такође слободне. Ако је тачка зависна, али са неким
степеном слободе, онда једна координата у дводимензионалном случају
или две координате у тродимензионом случају координате могу бити
слободне. Ипак, која координата је зависна, а која слободна није
тривијално питање и захтева посебну пажњу. На пример, у Декартовој
координатној равни, ако је тачка $А$ произвољна тачка праве $l$, једна
од координата може бити слободна, а једна зависна и може бити
израчуната на основу ограничења која важе за праву. Ипак, ако је права
$l$ паралелна са $x$-осом, онда $y$ координата тачке $A$ не може бити
слободна. Слично, ако је $l$ паралелно са $y$-осом онда $x$ координата
тачке $A$ не може бити слободна.

Геометријска ограничења која важе за тачке могу се формулисати у виду
алгебарских ограничења над координатама тачке (тј. као полиномијалне
једначине над уведеним симболичким координатама). На пример,
претпоставимо да симболичке координате за тачку $A$ су $(a^x, a^y)$,
за тачку $B$ су $(b^x, b^y)$, а за тачку $C$ су $(c^x, c^y)$. Чињеница
да је тачка $A$ средишња тачка интервала $BC$ одговара алгебарским
условима $2\cdot a^x = b^x + c^x$ и $2\cdot a^y = b^y + c^y$. Услов да
су тачке $A$, $B$ и $C$ колинеарне одговара алгебарском услову $(a^x -
b^x )(b^y - c^y) = (a^y - b^y )(b^x - c^x )$. Слични услови се могу
формулисати и за друге основне геометријске релације (паралелне праве,
нормалне праве, симетрала сегмента итд.).


\subsubsection{Примери}

\begin{primer}
\label{primer1}
Дат је троугао $ABC$, и нека је $B_1$ средишња тачка сегмента $AC$,
$C_1$ нека је средишња тачка интервала $AB$. Показати да је средња
линија $B_1C_1$ паралелна страници троугла $BC$.

\begin{figure}[hb]
\begin{center}
\input{srednja_linija.tkz}
\end{center}
\caption{Теорема о средњој линији троугла} \label{fig:srednja_linija}
\end{figure}


Основна идеја је поставити горњу фигуру у координатну раван, те је
стога први корак поставити координате за свако теме троугла. Тачке
$A$, $B$ и $C$ су слободне тачке, те им додељујемо координате $A(u_0,
u_1)$, $B(u_2, u_3)$ и $C(u_4, u_5)$. Тачке $B_1$ и $C_1$ су зависне,
те им додељујемо координате $B_1(x_0, x_1)$ и $C_1(x_2, x_3)$. Како је
$B_1$ средишња тачка сегмента $AC$, важи
$$2\cdot x_0 - u_0 - u_4 = 0$$ 
$$2\cdot x_1 - u_1 - u_5 = 0$$ Полином са леве страна прве једначине
означићемо са $f_1$, а полином са леве стране друге једначине
означићемо са $f_2$.

Тачка $C_1$ је средишња тачка сегмента $AB$, па важи:
$$2\cdot x_2 - u_0 - u_2 = 0$$
$$2\cdot x_3 - u_1 - u_3 = 0$$ Полином са леве страна прве једначине
означићемо са $f_3$, а полином са леве стране друге једначине
означићемо са $f_4$.

Са овe четири једначине дат је опис конструкције. Кажемо да полиноми
$f_1$, $f_2$, $f_3$ и $f_4$ припадају скупу--конструкције.

Потребно је показати да је $BC$ паралелно са $B_1C_1$, односно,
записано полиномима, потребно је да важи:
$$(x_2 - x_0)(u_5 - u_3) - (x_3 - x_1)(u_4 - u_2) = 0$$ Полином са
леве стране једначине означићемо са $g$ и то је полином тврђења
(припада скупу--тврђења).

Потребно је показати да свака $n$-тројка која анулира полиноме
конструкције, такође анулира и полиноме тврђења, тј. потребно је
показати да
\begin{tabbing}
$\forall\ u_0\ u_1\ u_2\ u_3\ u_4\ u_5\ x_0\ x_1\ x_2\ $ \= $x_3 \in \mathbb{R}.\ 2\cdot x_0 - u_0 - u_4 = 0 \land 2\cdot x_1 - u_1 - u_5 = 0$ \\
                                                       \> $\land\ 2\cdot x_2 - u_0 - u_2 = 0 \land 2\cdot x_3 - u_1 - u_3 = 0$ \\
                                                        \>$\Longrightarrow (x_2 - x_0)(u_5 - u_3) - (x_3 - x_1)(u_4 - u_2) = 0$
\end{tabbing}
\end{primer}

Приметимо да у претходном примеру услов да је $ABC$ троугао није
преведен у услов да су тачке $A$, $B$ и $C$ међусобно
различите. Додатно, услов да је $B_1C_1$ паралелно са $BC$ је дато
условом једначином $(x_2 - x_0)(u_5 - u_3) - (x_3 - x_1)(u_4 - u_2) =
0$. Са друге стране, ова алгебарска једначина је једнака једном
слабијем услову, наиме услову: $B \equiv C$ или $B_1 \equiv C_1$ или
$B_1C_1$ паралелно са $BC$. Преведено у геометријски запис, тврђење
које је доказано алгебарском методом је следеће:

{\em Нека је $B_1$ средишња тачка сегмента $AC$ и $C_1$ нека је
  средишња тачка интервала $AB$. Онда је $B_1C_1$ паралелно са $BC$
  или је $B$ идентично тачки $C$ или је тачка $B_1$ идентична тачки
  $C_1$.}

Како $B_1 \not\equiv C_1$ следи из $B \not\equiv C$, претходно тврђење
је еквивалетно са:

{\em Нека су $B$ и $C$ две различите тачке. Нека је $B_1$ средишња
  тачка сегмента $AC$ и $C_1$ нека је средишња тачка интервала
  $AB$. Онда је сегмент $B_1C_1$ паралелан са $BC$.}

Овај пример показује да транслације геометријског тврђења у алгебарски
запис и обратно захтева да се обрати пажња на многе детаље. У већини
система, хипотеза облика $AB || CD$ се обично записује једначином
облика $(b^x - a^x )(d^y - c^y ) = (d^x - c^x )(b^y - a^y )$, чак се
ова једначина користи као дефиниција за $AB || CD$. Ипак, овакав
приступ, раскида везу са синтетичком геометријом.

У зависности од конструкције и тврђења може бити пуно полинома који
припадају скупу--конструкције или скупу--тврђења. Ова два скупа су
веома важна за метод Гребнерових база (или за Вуов метод) и касније
биће детаљније појашњена њихова улога.

Може се показати да је већина геометријских својстава инваријантна у
односу на изометријске трансформације \cite{wucoq, wlog}. Ако су $P_1$
и $P_2$ две слободне тачке, увек постоји изометрија (прецизније,
композиција транслације и ротације) која слика $P_1$ у тачку $(0, 0)$
(тј. у координатни почетак), а тачку $P_2$ у тачку на $x$-оси (или у
тачку на $y$-оси). Зато се без губитка на општости може претпоставити
да слободна тачка има координате $(0, 0)$, док друга тачка има
координате $(u_0, 0)$ или $(0, u_0)$ (иако су оба избора коректна, у
неким случајевима избор може утицати на ефикасност, или, у случају
једноставног Вуовог метода, избор може утицати на могућност
доказивања). Примена овог закључка може значајно утицати на обим посла
који има алгебарска метода. Уз то, постоје хеуристике (са циљем да
побољшају ефикасност) за избор која од слободних тачака је
најпогоднија за ове специјалне координате.
 
\begin{primer}
Без губитка на општости у Примеру \ref{primer1}, тачкама $B$ $C$ могу
бити додељене координате $B(0, 0)$ и $C(u_4, 0)$. Тада се алгебарско
тврђење које треба доказати своди на:
\begin{tabbing}
$\forall\ u_0\ u_1\ u_4\ x_0\ x_1\ x_2\ x_3 \in \mathbb{R}.\ $ \= $2\cdot x_0 - u_0 - u_4 = 0 \land 2\cdot x_1 - u_1 = 0$ \\
                                                             \> $\land\ 2\cdot x_2 - u_0 = 0 \land 2\cdot x_3 - u_1 = 0$ \\
                                                             \> $\Longrightarrow (x_2 - x_0 ) \cdot 0 - (x_3 - x_1 )\cdot u_4 = 0$
\end{tabbing}
што тривијално следи ($x_3 − x_1 = 0$ следи из $2\cdot x_1 - u_1 = 0$
и $2\cdot x_3 - u_1 = 0$).
\end{primer}

\subsection{Алгебарски алгоритми}

Када се геометријско тврђење преведе у алгебарску форму, могуће је
применити алгебарски метод за доказивање теорема. Алгебарски
доказивачи теорема користе специфичан алгоритам над системом
полинома. Ако су $f_1, \ldots, f_k$ полиноми скупа--конструкције, а
$g_1, \ldots, g_l$ полиноми који су добијени из тврђења, онда провера
претпоставке се своди на проверу да ли је за свако $g_i$ испуњено:
$$\forall v_1, \ldots, v_n \in \mathbb{R} \bigwedge_{i=1}^k f_i(v_1,
\ldots, v_n) = 0 \Longrightarrow g_i(v_1, \ldots, v_n) = 0$$ Тарски је
приметио да се коришћењем елиминације квантификатора за релане бројеве
може доћи до доказа. Али у пракси, тешко је доказати нетривијална
математичка тврђења на овај начин јер су и софистицирани алгоритми за
елиминацију реалних квантификатора прилично неефикасни. Зато се
примењује другачији приступ. Главна идеја, коју је предложио Ву
1978. године је да велики број геометријских тврђења, које се
формулишу као универзална алгебарска тврђења у терминима координата,
су такође тачна и за комплексне вредности координата. Уместо
проверавања полинома над реалним бројевима, користи се поље
комплексних бројева и посматра се следећа
претпоставка \footnote{Наравно, постоји проблем некомплетности метода
  (у односу на геометрију) јер у неким случајевима тврђење важи у
  $\mathbb{R}$, али метод не успева да докаже због контрапримера који
  важе у $\mathbb{C}$.  }:
\begin{align}
\forall v_1, \ldots, v_n \in \mathbb{C} \bigwedge_{i=1}^k f_i(v_1,
\ldots, v_n) = 0 \Longrightarrow g_i(v_1, \ldots, v_n) = 0 \label{jednacina}
\end{align}
Ово је
тачно ако $g$ припада идеалу $I = \langle f_1, \ldots f_k \rangle$
који је генерисан над полиномима $f_i$ ($i = 1, \ldots k$), тј. када
постоји цео број $r$ и полиноми $h_1, \ldots h_l$ такви да $g_i^r =
\sum_{i=1}^k h_if_i$. Хилбертова (Nullstellensatz) теорема тврди да
ако је поље алгебарски затворено (а $\mathbb{C}$ јесте) онда је
обрнуто такође тачно.

Два најзнаајнија алгебарска метода користе врсту Еуклидског дељења да
провере исправност претпоставке дате у \ref{jednacina}. Бухбергеров
алгоритам трансформише полазни скуп у \emph{Гребнерову базу} у којој
алгоритам дељења се може ефикасно употребити, а Вуов метод користи
\emph{псеудо--дељење} које на неки начин имитира Еуклидско дељење.

\subsection{Вуов метод}

Главна операција над полиномима у Вуовом методу је псеудо--дељење које
када се примени на два полинома $p(v_1, \ldots, v_n)$ и $q(v_1,
\ldots, v_n)$ производи декомпозицију
$$c^r\ p = tq + r$$ при чему је $c(v_1 ,\ldots , v_{n-1})$ водећи
коефицијент у полиному $q$ уз променљиву $v_n$, $r$ је број ненула
коефицијената полинома $p$, $t(v_1, \ldots, v_n)$ је псеудо--количник,
$r(v_1, \ldots, v_n)$ је псеудо--остатак, степен $v_n$ у $r$ је мањи
него у $q$. Како важи $r = c^r\ p - tq$, јасно је да $r$ припада
идеалу генерисаном над полиномима $p$ и $q$. 

Први корак (једноставног) Вуовог метода \cite{chou1988mechanical}
користи псеудо--дељење да трансформише конструисани систем полинома
($\bigwedge_{i=1}^k f_i$) у троугаону форму, тј. у систем једначина у
коме свака наредна једначина у систему уводи тачно једну нову зависну
променљиву. Након тога, коначни остатак се рачуна псеудо--дељењем
полинома тврђења ($g_i$) са сваким полиномом троугаоног система.

Вуов метод у свом најједноставнијем облику омогућава израчунавање
полинома $c, h_1, \ldots, h_k$ и $r$ таквих да важи
$$cg_i = \sum_{i=1}^k h_if_i + r$$

Ако је коначни остатак $r$ једнак нули, онда се сматра да је
претпоставка доказана. Једноставан Вуов метод није комплетан (у
алгебарском смислу). Комплекснија и комплетна верзија метода користи
растуће ланце који се разматрају у оквиру Рит-Вуовог принципа.

% ------------------------------------------------------------------------------
\subsection{Припадност иделу, Гребнерове базе, пример примене Гребнеровог метода на конкретан проблем}
% ------------------------------------------------------------------------------

У овом одељку су дате основне дефиниције и теореме које представљају
математичку основу за овај рад. Прва дефиниција је дефиниција проблема
који треба решити. Друга дефиниција дефинише Гребнерове базе, алатку
која даје одговор на проблем припадности идеалу. Коначно, дата је и
теорема која спаја ове две дефиниције.

\begin{definition}[Припадност идеалу]
  За дате $f, f_1, \ldots, f_k \in K[X_1, \ldots, X_n]$ где су $f,
  f_1, \ldots, f_k$ полиноми, а $K[X_1, \ldots, X_n]$ је прстен
  полинома над $K$, и $\langle f_1, \ldots f_k \rangle$ је идеал
  генерисан са $f_1, \ldots f_k$, $f \in \langle f_1, \ldots f_k
  \rangle$ је задовољено.
\end{definition}

\begin{definition}
  Нека $I = \langle f_1, \ldots, f_n \rangle$ је идеал генерисан
  коначним скупом полинома.  $G$ je \textbf{Гребенерова база} идеала
  $I$ ако и само ако мултиваријантно дељење (означено са $\to_G$) било
  ког полинома у идеалу $I$ са $G$ даје 0.
\end{definition}

\begin{theorem}
Проблем $f \in I$ је еквивалентан $f \stackrel{*}{\to}_G 0$.
\end{theorem}

Оно што је заправо речено овом теоремом је да ако постоји скуп
полинома конструкције и ако су сви полиноми једнаки нули, онда је
могуће одредити Гребнерову базу за овај скуп и ако је могуће показати
(коришћем полинома Гребнерове базе) да су сви полиноми тврђења једнаки
нули онда је геометријско тврђење тачно. За израчунавање Гребнерове
базе користи се \emph{Бухбергеров алгоритам} који се лако може
имплементирати. Данас постоје многе хеуристике које омогућавају да
израчувања буду бржа, али ми ћемо га представити у његовој основном
облику:

\begin{definition}
\textbf{S-полином} над полиномима $f_i$ и $f_j$, означен са $S(f_i,
f_j)$ се израчунава на следећи начин:
\begin{description}
\item[1)] $m = GCD(H(f_i), H(f_j))$ 
\item[2)] $m = m_i * H(f_i)$ при чему је $H(f_i)$ водећи моном у $f_i$ 
\item[3)] $m = m_j * H(f_j)$  при чему је $H(f_j)$ водећи моном у $f_j$
\item[4)] $S(f_i, f_j) = m_i*f_i - m_j*f_j$ 
\end{description}
\end{definition}

За скуп полинома $\{f_i, ..., f_j\}$ Бухбергеров алгоритам се састоји
из следећих корака:
\begin{description}
\item[1)] S-полином се одређује за свака два полинома из скупа чији
  водећи мономи нису узајамно прости и новодобијени полиноми се додају
  у скуп.
\item[2)] Понавља се први корак док год има полинома који могу бити
  додати.
\end{description}

Метод Гребнерових база је већ имплементиран у систему Isabelle/HOL и
може се користити на следећи начин:
\selectlanguage{english}
{\tt
\begin{tabbing}
\textbf{lem}\=\textbf{ma} "}$\lbrakk -2\cdot u_1 + x_1 + x_2 =$ ($0$::real); $-2\cdot v_1 + y_1 + y_2$ = $0 \rbrakk \Longrightarrow$ \\
            \> $x_1\cdot v_1 - x_1\cdot y_2 + u_1\cdot y_2 - v_1\cdot x_2 - y_1\cdot u_1 + y_1\cdot x_2 = 0$"} \\
\textbf{by algebra}
\end{tabbing}
}
\selectlanguage{serbian}

при чему је метод Гребнерових база позван са {\tt \textbf{by
    algebra}}.

\begin{primer}
Показати да се симетрале страница троугла секу
  у једној тачки.
\begin{figure}[hb]
\begin{center}
\input{simetrale_stranica.tkz}
\end{center}
\caption{Теорема о симетралама страница троугла} \label{fig:simetrale_stranica}
\end{figure}


Основна идеја је да се горња фигура постави у координатну раван, а
потом да се хипотезе теореме интерпретирају као тврђења у аналитичкој,
а не синтетичкој, геометрији. То значи да је први корак поставити
координате троугла тако што пoставимо тачку $A$ у координатни почетак,
односно $A = (0, 0)$. Потом, можемо одабрати да су координате тачке $B
= (b^x, 0)$, a тачке $C = (c^x, c^y)$ (тврђење је потребно показати за
било које координате тачака, али се лако може показати да је могуће
било које координате транслирати у ове које су специјално одабрене и
олакшавају даља израчунавања). Тачке $A$, $B$ и $C$ су слободне и
њихове координате би могли означити са $u_i$ ($i = 1, 2, 3$), али да
би лакше пратили ознаке у овом примеру, означили смо их
другачије. Сада се геометријска конструкција транслира у скуп
полинома.

Прво записујемо хипотезу да се симетрале страница $AB$ и $BC$ секу у
тачки $O_1 = (o^x_{1}, o^y_{1})$. Како су симетрале потпуно одређене тачкама
$A, B, C$ и $O_1$, добијају се следеће једначине:

\medskip
\begin{center}
 \begin{tabular}{rr}
$f_1:$ & $o^x_{1} - \frac{b^x}{2} = 0$\\
{} & {}\\
$f_2:$ & $\frac{b^x - c^x}{c^y}\cdot o^x_{1} - o^y_{1} + \frac{{c^y}^2 - {b^x}^2 + {c^x}^2}{2\cdot c^y} = 0$
\end{tabular}
\end{center}

\medskip

Сада посматрамо другу хипотезу -- симетрале страница $AB$ и $AC$ се
секу у тачки $O_2 = (o^x_{2}, o^y_{2})$. Добијамо две нове једначине:

\medskip
\begin{center}
 \begin{tabular}{rr}
$f_1':$ & $o^x_{2} - \frac{b^x}{2} = 0$\\
{} & {}\\
$f_3:$ & $\frac{c^x}{c^y}\cdot o^x_{2} + o^y_{2} - \frac{c^y}{2} - \frac{{c^x}^2}{2\cdot c^y} = 0$
\end{tabular}
\end{center}

\medskip
Значи, имамо скуп полинома:
\begin{align}
 G = &\{f_1, f_2, f'_1, f_3\} \nonumber
\end{align}

Са овим полиномима је заправо описана конструкција. Сада је потребно
показати да важи $O_1 = O_2$, тј. $(o^x_{1}, o^y_{1}) = (o^x_{2},
o^y_{2})$. То значи да је потребно одредити Гребнерову базу $G'$ скупа
$G$ и циљ је доказати $o^x_{1} - o^x_{2} \to_{G'} = 0$ и $o^y_{1} -
o^y_{2} \to_{G'} = 0$. Са ова два полинома (лева страна датих
једначина) дати су полиноми тврђења.

У намери да се израчуна Гребнерова база скупа $G$ користи се
Бухбергеров алгоритам и добијени резултат је:

\begin{align}
  G' = & \{f_1, f_2, f_3, f_4, f_5, f_6\} = \{ o^x_{1} - \frac{b^x}{2},\quad  o^x_{2} - \frac{b^x}{2},\nonumber \\
  &\frac{b^x-c^x}{c^y}\cdot o^x_{1} - o^y_{1} + \frac{{c^y}^2 - {b^x}^2 + {c^x}^2}{2\cdot c^y},\quad \frac{c^x}{c^y}\cdot o^x_{2} + o^y_{2} - \frac{c^y}{2} - \frac{{c^x}^2}{2\cdot c^y}, \nonumber \\
  &-o^y_{1} + \frac{c^y}{2} + \frac{{c^x}^2}{2\cdot c^y} - \frac{c^x\cdot b^x}{2\cdot
    c^y},\quad o^y_{2} - \frac{c^y}{2} - \frac{{c^x}^2}{2\cdot c^y} + \frac{c^x\cdot
    c}{2\cdot c^y} \nonumber \}
\end{align}

Коришћењем овог скупа, $o^x_{1} - o^x_{2}  \stackrel{*}{\to}_{G'} 0$ се лако може показати. Заиста,
$$o^x_{1} - o^x_{2} \quad \to_{f_1}\quad  -o^x_{2} + \frac{b^x}{2} \quad\to_{f_3}\quad -o^x_{2} + \frac{b^x}{2} + o^x_{2} - \frac{b^x}{2} = 0\;.$$

Слично се може показати $o^y_{1} - o^y_{2} \stackrel{*}{\to}_{G'} 0$,
$$o^y_{1} - o^y_{2} \quad \to_{f_5} \quad -o^y_{2} + \frac{c^y}{2} + \frac{{c^x}^2}{2c^y} - \frac{c^xb^x}{2c^y} \quad \to_{f_6}$$ 
$$\to_{f_6} \quad -o^y_{2} + \frac{c^y}{2} + \frac{{c^x}^2}{2c^y} - \frac{c^xb^x}{2c^y} + o^y_{2} - \frac{c^y}{2} - \frac{{c^x}^2}{2c^y} - \frac{c^xb^x}{2c^y} = 0\;.$$
\end{primer}


% ------------------------------------------------------------------------------
\section{Формална анализа алгебарских метода у систему Isabelle/HOL}
% ------------------------------------------------------------------------------

% ------------------------------------------------------------------------------
\subsection{Репрезентација геометријских конструкција коришћењем термова}
% ------------------------------------------------------------------------------

Прво, било је потребно представити геометријску конструкцију на
одговарајући начин тако да се лако може аутоматски обрадити, тј. да се
може користити у оквиру нашег алгоритма. Зато су геометријске
конструкције репрезентоване термовима. Тренутно, постоје два типа
објеката -- тачке и праве. Додатно, геометријска тврђења су
репрезентована коришћењем термова. У систему Isabelle/HOL одговарајући
типови се дефинишу на следећи начин:

\begin{small}
\selectlanguage{english} {\tt
  \begin{tabbing}
    \hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\kill
\textbf{data}\=\textbf{type} \\
    \> point = Point id  $|$ Intersect line line $|$ Center point point \\ 

\textbf{and} line = \= Line point point  $|$ Bisector point point \\
          \>\>\>     $|$ Normal line point $|$ Parallel line point \\

\textbf{and} statement = \= IsIncident point line \\
          \>\>\> $|$ IsEqualp point point  $|$ IsEquall line line \\
          \>\>\> $|$ IsParallel line line  $|$ IsNormal line line \\
          \>\>\> $|$ IsCongruent point point point point \\
          \>\>\> $|$ IsBisector line point point
\end{tabbing}
}
\selectlanguage{serbian}
\end{small}

Као што можемо видети, тачка може бити дата својим идентификатором или
може бити конструисана као пресек две праве или као средиште дужи
одређене двема тачкама. Слично, права може бити конструисана као права
која је одређена двема тачкама или као симетрала датог сегмента
итд. Такође, постоје и различита тврђења. На пример, {\tt IsIncident
  point line} означава тврђење да тачка припада прави, а {\tt IsEqualp
  point point} означава да су две тачке једнаке. \\

\begin{primer}
Терм {\tt IsIncident (Point 1) (Line (Point 1) (Point 2))} означава
тврђење да тачка припада прави која је одређена са том тачком и још
једном датом тачком.
\end{primer}

\begin{primer}
Терм
\begin{small}
\selectlanguage{english}
\emph{
{\tt
  \begin{tabbing}
    \hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\hspace{5mm}\=\kill
\textbf{let} \= $c$ = Bisector (Point $A$) (Point $B$); \\
   \> $b$ = Bisector (Point $A$) (Point $C$); \\
   \> $a$ = Bisector (Point $B$) (Point $C$); \\
   \> $O_1$ = Intersect $a$ $b$; \\
   \> $O_2$ = Intersect $a$ $c$ \textbf{in} \\
   \> IsEqualp $O_1$ $O_2$
\end{tabbing}
}
}
\selectlanguage{serbian}
\end{small}
је пример који је описан раније -- симетрале страница се секу у једној
тачки.
\end{primer}

Синтетичким термовима који служе за репрезентацију геометријских
тврђења може бити дата различита семантика интерпретирањем у
различитим моделима геометрије (на пример, Декартова координатна
раван, геометрија Хилберта, геометрија Тарског). Коришћењем система
модула у систему Isabelle/HOL ({\tt \textbf{locales}}) избегава се
понављање дефиниција. Зато је дефинисан модуо {\tt AbstractGeometry}
који садржи примитивне релације (на пример, релацију инциденције,
релацију између, релацију подударно) и дефинише њихова
својства. Изведени концепти се могу дефинисати једино у оквиру овог
локала. На пример, изведени појам колинеарност се своди на примитиван
појам инциденције --- кажемо да су три тачке колинеарне акко постоји
права којој припадају све три тачке. Различите геометрије могу
интерпретирати овај модуо и (абстрактне) дефиниције изведених појмова
се пренесе у те геометрије.

\begin{sloppypar}
Сематика термова (у абстрактној геометрији) је дата функцијама \mbox{{\tt
  point\_interp}}, {\tt line\_interp} и {\tt statement\_interp} чији
улазни подаци (редом) су {\tt point}, {\tt line} и {\tt statement}, а
повратна вредност су редом (абстрактна) тачка, (абстрактна) права или
вредност Boolean. Како је абстрактна интерпретација термова
јединствено одређена само ако су слободне тачке фиксне, све ове
функције имају и додатни аргумент --- функцију која мапира индексе
слободних тачака у тачке.
\end{sloppypar}

Тврђења се интерпретирају коришћењем примитивних релација абстрактне
геометрије, док се конструкције своде на примитивне релације
коришћењем Хилбертовог $\varepsilon$ оператора ({\tt \textbf{SOME}} у
систему Isabelle/HOL). На пример: {\tt
\begin{tabbing}
sta\=tement\_interp (Incident $p$ $l$) $fp$ = \\
   \>incident (point\_interp $p$ $fp$) (line\_interp $l$ $fp$) \\
point\_interp (Intersection $l_1$ $l_2$) $fp$ = \\
   \>(\textbf{SOME} $P$. \= incident $P$ (line\_interp $l_1$ $fp$) \\
   \>                    \> $\land$ incident $P$ (line\_interp $l_2$ $fp$))
\end{tabbing}
}

Тврђење (записано термом) је исправно у (абстрактној) геометрији ако
је тачно за све интерпретације (за било који избор слободних тачака).

\selectlanguage{english}
{\tt 
\begin{tabbing}
\textbf{defi}\=\textbf{nition} (\textbf{in} AbstractGeometry) valid :: "statement\_term => bool" \\
  \textbf{where} \\
  \> "valid $stmt$ = (\textbf{ALL} $fp$. statement\_interp $stmt$ $fp$)"
\end{tabbing}
}
\selectlanguage{serbian}

Сви појмови се подижу на ниво конкретног геометријског модела (на
пример, Декартова координатна раван, геометрија Хилберта, геометрија
Тарског) када се покаже да су интерпретација модула {\tt
  AbstractGeometry}.

Након што је дефинисана репрезентација геометријских конструкција
коришћењем термова, следећи корак је транслирати термове у скупове
полинома тако да се на њих може применити метод Гребнерових база или
Вуов метод.


\subsection{Кратак опис алгоритма за транслацију термова у полиноме}

Алгоритам се користи да трансформише репрезентацију геометријске
конструкције и тврђења из записа коришћењем термова у одговарајуће
полиноме. Алгоритам је рекурзиван и његовом применом се добијају два
скупа. Први скуп је скуп полинома који репрезентују геометријску
конструкцију и зато се зове \emph{скуп--конструкција}. Други скуп је
скуп полинома који репрезентују тврђења и њега зовемо
\emph{скуп--тврђења}. Метод Гребнерових база се заснива на показивању
да сваки полином из скупа--тврђења се може свести на нула коришћењем
Гребнерове базе скупа--конструкција.

Алгоритам рекурзивно обрађује дати терм и за сваки непознати објекат
уводи нове координате. Такође, истовремено, додају се нови полиноми у
одговарајуће скупове који се заснивају на идентитетима аналитичке
геометрије. У сваком тренутку чувају се подаци о тренутном стању,
односно о симобиличким координатама које су до тог тренутка уведене
(што су заправо подтермови полазног терма самог тврђења).


Као пример, показаћемо кораке алгоритма за тврђење {\tt IsIncident
  point\_t line\_t} при чему {\tt point\_t} и {\tt line\_t} могу бити
произвољни, комплексни термови за тачку и праву. Кораци су следећи:
\begin{itemize}
\item додају се нове променљиве $x_0$ и $y_0$. Ове променљиве су
  непознате координате за тачку $O$ која је дата термом {\tt point\_t}
  --- $O(x_0, y_0)$
\item додају се променљиве $a_0$, $b_0$, и $c_0$ које представљају
  непознате коефицијенте за праву $p$ која је дата термом {\tt
    line\_t} --- $p = a_0\cdot x + b_0\cdot y + c_0$.
\item позива се функција {\tt point\_poly(point\_t, $x_0$, $y_0$)} која
  конструише полиноме који спајају променљиве $x_0$ и $y_0$ са термом
  {\tt point\_t}.
\item позива се функција {\tt line\_poly(line\_t, $a_0$, $b_0$)} која
  конструише полиноме који спајају променљиве $a_0$, $b_0$ и $c_0$ са
  термом {\tt line\_t}.
\item додаје се полином $a_0\cdot x_0 + b_0\cdot y_0 + c_0$ у
  скуп--тврђења.
\end{itemize}

Као илустрација у наставку се може видети део кода у систему
Isabelle/HOL који имплементира овај корак транслације.  
\begin{small}
\selectlanguage{english} {\tt
  \begin{tabbing}
   alg\=brize (IsIncident $p$ $l$) ==  \\
      \>"}\=\textbf{let} \= $x$ = point\_id\_x 0; $y$ = point\_id\_y 0; \\
         \>\>\> $a$ = line\_id\_a 0;  $b$ = line\_id\_b 0; $c$ = line\_id\_c 0; \\
         \>\>\> ($s'$, $pp$) = point\_poly $p$ $x$ $y$ (| maxp = 0, maxl = 0 |); \\
         \>\>\> (\_, $lp$) = line\_poly $l$ $a$ $b$ $s'$  \textbf{in} \\
         \>\>   (sup $pp$ $lp$, \\
         \>\> Fset.Set[poly\_of (\=PSum [PMult[PVar $a$, PVar $x$], \\ 
         \>\>\>                  PMult[PVar $b$, PVar $y$]])])"}
\end{tabbing}
}
\selectlanguage{serbian}
\end{small}

За репрезентацију полинома коришћена је Isabelle/HOL теорија
\emph{Executable Multivariate Polynomials}
\cite{sternagel2013executable}.

\begin{sloppypar}
Као што се може приметити постоје две нове функције \mbox{{\tt point\_poly}}
и \mbox{{\tt line\_poly}} које имају два аргумента --- термове и две
променљиве. Ове функције су узајамно рекурзивне и користе се да се
одреде полиноми скупа--конструкција. Демонстрираћемо како функционишу
на следећем примеру примеру --- {\tt Intersect line1\_t line2\_t}. Као
и раније, термови {\tt line1\_t} и {\tt line2\_t} репрезентују линије
и могу бити произвољно комплексни. Терм примера репрезентује тачку и
потребно је одредити полиноме који одређују ту тачку. Кораци алгоритма
у овом примеру су следећи:
\end{sloppypar}
\begin{itemize}
\item додајемо променљиве $a_1$ и $b_1$ који су коефицијенти праве ($p
  = a_1\cdot x + b_1\cdot y + 1$) која је дата термом {\tt line1\_t}
\item додајемо променљиве $a_2$ i $b_2$ који су коефицијенти праве ($p
  = a_2\cdot x + b_2\cdot y + 1$) која је дата термом {\tt line2\_t}
 \item позива се функција {\tt line\_poly(line\_t, $a_1$, $b_1$)}
 \item позива се функција {\tt line\_poly(line\_t, $a_2$, $b_2$)}
 \item додају се полиноми $x\cdot(b_2\cdot a_1 - a_2\cdot b_1) - b_1 +
   b_2$ и $y\cdot(b_2\cdot a_1 - a_2\cdot b_1) - (a_2 - a_1)$ у
   скуп--конструкције.
\end{itemize}
Ови полиноми су добијени коришћењем геометријских једнакости тако да
дато геометријско својство важи.

% ------------------------------------------------------------------------------
\subsection{Доказивање исправности}
% ------------------------------------------------------------------------------

Главна идеја је да се аутоматски метод за доказивање теорема у
геометрији формално верификује. То значи да је главни део нашег рада
да се докаже исправност алгоритма транслације. У намери да се то
уради, биће коришћена аналитичка геометрија као веза између синтетичке
геометрије и алгебре. Потребно је показати да све што се покаже
коришћењем алгебарских метода такође важи у свим моделима синететичке
геометрије. Са друге стране, још је потребно показати да је аналитичка
геометрија модел синтетичке геометрије и још даље, да су сви модели
изоморфни, тј. да све што важи у нашем моделу такође важи и у другим
моделима.

Формализацију везе између синтетичке и аналитичке геометрије, односно,
доказ да је аналитичка геометрија модел геометрије Тарског и
геометрије Хилберта смо пoказали и дискутовали раније, у поглављу
\ref{analiticka}.


\paragraph{Веза између аналитичке геометрије и алгебре.}
Централна теорема коју смо формално показали је да ако су сви полиноми
тврђења нула кад год су и полиноми конструкције нула (тј. ако сви
полиноми тврђења припадају идеалу генерисаном над полиномима
конструкције), онда је тврђење исправно у аналитичкој
геометрији. Односно, ако је неко тврђење доказано методом Гребнерових
база оно заиста важи и у аналитичкој геометрији. Записано у терминима
математичке формуле:
\[
(\forall (u, x))(\forall g\in G)( (\forall f\in F. f(u,x) = 0) \Rightarrow g(u,x) = 0) \Rightarrow \textrm{геометријско тврђење} \nonumber
\]
при чему је $F(u, x)$ скуп--конструкције, а $G(u, x)$ је
скуп--тврђења. Када кажемо {\em геометријско тврђење} мислимо на
тврђење у аналитичкој геометрији јер су алгебарски методи повезани са
аналитичком геометријом. Први део је показати да важи $(\forall f \in
F)(\forall (u,x))f(u,x) = 0$. Други део је показати да ако је показано
$(\forall g\in G)(\forall f\in F. f(u,x) = 0) \Rightarrow g(u,x) = 0)$
онда геометријско тврђење важи у аналитичкој геометрији. 

Запис овог тврђења у систему Isabelle/HOL је:
\selectlanguage{english}
{\tt
\begin{tabbing}
\textbf{theorem} "}\textbf{let} ($cp$, $sp$) = algebrize term \textbf{in} \\
(\textbf{ALL} $ass$\=. (\= (\textbf{ALL} $p$ : $cp$. eval\_poly $ass$ $p$ = 0) $\longrightarrow$ \\
     \>                 \> (\textbf{ALL} $p$ : $sp$. eval\_poly $ass$ $p$ = 0)) $\longrightarrow$ \\
     \> AnalyticGeometry.valid $s$)"}
\end{tabbing}
}
\selectlanguage{serbian}

 Доказ се изводи коришћењем индукције у систему
 Isabelle/HOL. Посматрајмо следећи пример:

{\tt In (Center (Point 0) (Point 1)) (Line (Point 0) (Point 1))}\\

{\tt Point 0} {\tt Point 1} добијају фиксне координате $(p_0^x,
p_0^y)$ и $(p_1^x, p_1^y)$. Потом {\tt Center (Point 0) (Point 1)}
добија координате $(x_1, y_1)$ и оне су зависне променљиве и зависе од
{\tt Point 0} и {\tt Point 1}. На исти начин додељујемо координате
$(a_1, b_1, c_1)$ за {\tt Line (Point 0) (Point 1)} $(a_1, b_1, c_1)$
(то су опет зависне променљиве које зависе од већ датих тачака {\tt
  Point 0} и {\tt Point 1}). За доказ исправности потребно је показати
да важи:
\begin{align}
 2x_1 = p_0^x + p_1^x \qquad a_1(p_1^xp_0^y - p_1^yp_0^x) - c_1(p_1^y - p_0^y) = 0 \nonumber \\ 
 2y_1 = p_0^y + p_1^y \qquad b_1(p_1^xp_0^y - p_1^yp_0^x) + c_1(p_1^x - p_0^x) = 0 \nonumber \\
 \textrm{закључак је дат у форми једначине: } \qquad a_1x_1 + b_1y_1 + c_1 = 0 \nonumber
\end{align}
Ово се лако показује коришћењем идентита у аналитичкој геометрији.

\subsection{Закључци и даљи рад}

Алгоритам се може оптимизовати и могуће је додати још геометријских
објеката (кругови, елипсе итд.) и геометријских тврђења. Цео алгоритам
је потребно повежати са већ постојаћим формализованим методом
Гребнерових база у систему Isabelle/HOL.

Како имплементација генерисања полинома није везана ни за један
конкрета метод, могуће је користити генерисане полиноме и за друге
алгебарске методе, као што је Вуов метод.


% ------------------------------------------------------------------------------
\section{Примена алгебарских метода на проблеме у стереометриjи}
% ------------------------------------------------------------------------------


